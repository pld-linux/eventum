--- ./cli/eventum	2009-06-27 19:46:44.401524716 +0300
+++ ./cli/eventum	2009-06-27 19:45:22.781438493 +0300
@@ -12,9 +12,8 @@
 // @(#) $Id$
 
 // definitions of path related variables
-define('APP_PATH', dirname(__FILE__) . '/');
-define('APP_INC_PATH', APP_PATH . '/lib/eventum');
-define('APP_PEAR_PATH', APP_PATH . '/lib/pear');
+define('APP_PATH', '/usr/share/eventum');
+define('APP_INC_PATH', APP_PATH . '/cli');
 
 if (defined('APP_PEAR_PATH')) {
     set_include_path(APP_PEAR_PATH . PATH_SEPARATOR . get_include_path());
--- eventum-2.3.3/init.php~	2012-12-17 13:49:09.000000000 +0200
+++ eventum-2.3.3/init.php	2012-12-17 13:49:41.676803793 +0200
@@ -27,7 +27,7 @@
 // | Authors: Elan Ruusamäe <glen@delfi.ee>                               |
 // +----------------------------------------------------------------------+
 
-if (!file_exists(dirname(__FILE__) . '/config/config.php') || !filesize(dirname(__FILE__) . '/config/config.php')) {
+if (!file_exists('/etc/webapps/eventum/config.php') || !filesize('/etc/webapps/eventum/config.php')) {
     Header('Location: setup/');
     exit(0);
 }
@@ -47,7 +47,7 @@
 // define base path
 define('APP_PATH', realpath(dirname(__FILE__)));
 if (!defined('APP_CONFIG_PATH')) {
-    define('APP_CONFIG_PATH', APP_PATH . '/config');
+    define('APP_CONFIG_PATH', '/etc/webapps/eventum');
 }
 
 // include local site config. may override any default
@@ -64,23 +64,15 @@
 }
 
 if (!defined('APP_TPL_COMPILE_PATH')) {
-    define('APP_TPL_COMPILE_PATH', APP_PATH . '/templates_c');
+    define('APP_TPL_COMPILE_PATH', '/var/cache/eventum');
 }
 
 if (!defined('APP_INC_PATH')) {
     define('APP_INC_PATH', APP_PATH . '/lib/eventum');
 }
 
-if (!defined('APP_PEAR_PATH')) {
-    define('APP_PEAR_PATH', APP_PATH . '/lib/pear');
-}
-
-if (!defined('APP_SPHINXAPI_PATH')) {
-    define('APP_SPHINXAPI_PATH', APP_PATH . '/lib/sphinxapi');
-}
-
 if (!defined('APP_SMARTY_PATH')) {
-    define('APP_SMARTY_PATH', APP_PATH . '/lib/Smarty');
+    define('APP_SMARTY_PATH', '/usr/share/php/Smarty');
 }
 
 if (!defined('APP_JPGRAPH_PATH')) {
@@ -81,7 +77,7 @@
 }
 
 if (!defined('APP_LOCKS_PATH')) {
-    define('APP_LOCKS_PATH', APP_PATH . '/locks');
+    define('APP_LOCKS_PATH', '/var/run/eventum/');
 }
 
 if (!defined('APP_SQL_PATCHES_PATH')) {
@@ -89,7 +85,7 @@
 }
 
 if (!defined('APP_LOG_PATH')) {
-    define('APP_LOG_PATH', APP_PATH . '/logs');
+    define('APP_LOG_PATH', '/var/log/eventum');
 }
 
 if (!defined('APP_ROUTED_MAILS_SAVEDIR')) {
--- eventum-2.3.1/htdocs/setup/index.php~	2011-09-15 12:34:21.000000000 +0300
+++ eventum-2.3.1/htdocs/setup/index.php	2011-09-15 12:36:34.061947696 +0300
@@ -42,14 +42,14 @@
 define('APP_PATH', realpath(dirname(__FILE__) . '/../..'));
 define('APP_INC_PATH', APP_PATH . '/lib/eventum');
 define('APP_PEAR_PATH', APP_PATH . '/lib/pear');
-define('APP_SMARTY_PATH', APP_PATH . '/lib/Smarty');
-define('APP_CONFIG_PATH', APP_PATH . '/config');
+define('APP_SMARTY_PATH', '/usr/share/php/Smarty');
+define('APP_CONFIG_PATH', '/etc/webapps/eventum');
 define('APP_SETUP_FILE', APP_CONFIG_PATH . '/setup.php');
 define('APP_TPL_PATH', APP_PATH . '/templates');
-define('APP_TPL_COMPILE_PATH', APP_PATH . '/templates_c');
-define('APP_LOG_PATH', APP_PATH . '/logs');
+define('APP_TPL_COMPILE_PATH', '/var/cache/eventum');
+define('APP_LOG_PATH', '/var/log/eventum');
 define('APP_ERROR_LOG', APP_LOG_PATH . '/errors.log');
-define('APP_LOCKS_PATH', APP_PATH . '/locks');
+define('APP_LOCKS_PATH', '/var/run/eventum');
 
 header('Content-Type: text/html; charset=' . APP_CHARSET);
 
@@ -254,10 +254,6 @@
         $errors[] = "The 'file_uploads' directive needs to be enabled in your PHP.INI file in order for Eventum to work properly.";
     }
 
-    $error = checkPermissions(APP_CONFIG_PATH, "Directory '" . APP_CONFIG_PATH . "'", true);
-    if (!empty($error)) {
-        $errors[] = $error;
-    }
     $error = checkPermissions(APP_SETUP_FILE, "File '" . APP_SETUP_FILE. "'");
     if (!empty($error)) {
         $errors[] = $error;
@@ -329,10 +325,6 @@
     $setup_file_path = APP_SETUP_FILE;
 
     clearstatcache();
-    // check if config directory is writable
-    if (!is_writable(APP_CONFIG_PATH)) {
-        return "The file '" . APP_CONFIG_PATH . "' directory needs to be writable by the web server user. Please correct this problem and try again.";
-    }
     // need to create a random private key variable
     $private_key = '<?php
 $private_key = "' . md5(microtime()) . '";
--- eventum-2.2/irc/eventum-irc-bot~	2009-07-23 14:03:41.422211655 +0300
+++ eventum-2.2/irc/eventum-irc-bot	2009-07-23 13:54:22.000000000 +0300
@@ -32,7 +32,7 @@
 
 ini_set('memory_limit', '1024M');
 
-require_once dirname(__FILE__) . '/../init.php';
+require_once '/usr/share/eventum/init.php';
 
 if (!file_exists(APP_CONFIG_PATH . '/irc_config.php')) {
     fwrite(STDERR, "ERROR: No config specified. Please see setup/irc_config.php for config information.\n\n");
--- eventum/crons/monitor.php	2010-11-24 17:24:23.000000000 +0200
+++ eventum/crons/monitor.php	2010-11-24 18:23:09.664934996 +0200
@@ -37,17 +37,17 @@
 $required_files = array(
     APP_CONFIG_PATH . '/config.php' => array(
         'check_owner'      => true,
-        'owner'            => 'apache',
+        'owner'            => 'root',
         'check_group'      => true,
-        'group'            => 'apache',
+        'group'            => 'http',
         'check_permission' => true,
         'permission'       => 640,
     ),
     APP_CONFIG_PATH . '/setup.php' => array(
         'check_owner'      => true,
-        'owner'            => 'apache',
+        'owner'            => 'root',
         'check_group'      => true,
-        'group'            => 'apache',
+        'group'            => 'http',
         'check_permission' => true,
         'permission'       => 660,
         'check_filesize'   => true,
--- eventum-2.3.3/config/sphinx.conf.php~	2012-06-27 14:59:39.000000000 +0300
+++ eventum-2.3.3/config/sphinx.conf.php	2012-06-27 15:04:52.928810689 +0300
@@ -26,7 +26,7 @@
 // | Authors: Bryan Alsdorf <bryan@mysql.com>                             |
 // | Authors: Elan Ruusamäe <glen@delfi.ee>                               |
 // +----------------------------------------------------------------------+
-require_once dirname(__FILE__) . "/../init.php";
+require_once '/usr/share/eventum/init.php';
 
 if (!defined('SPHINX_LOG_PATH')) {
     define('SPHINX_LOG_PATH', '/var/log/sphinx/');
